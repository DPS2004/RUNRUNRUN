pico-8 cartridge // http://www.pico-8.com
version 18
__lua__

function _init()
	--here are the coords for the player. the x remains the same.
	--format is y1,y2 for first 8, last number is y offset
	fx = {0,4,3,3,3,0,0,0}
	--still
	f0y = {0,0,0,5,3,3,5,0,5}
	--walk1
	f1y = {0,0,0,4,3,3,5,0,5}
	--walk2
	f2y = {0,0,0,5,3,3,4,0,5}
	--jump1
	f3y = {0,0,0,6,4,4,6,0,6}
	--jump2
	f4y = {0,0,0,5,4,4,5,0,5}
	--squish
	f5y = {0,0,0,3,2,2,3,0,3}
	--gp
	f6y = {6,6,6,0,2,2,0,6,4}
	player = {x=30,y=94, sprlst = f0y, state = "title", velocity = 0}
	a = 0
	blockx = {0,50,60,90,100,128}
	blocky = {95, 115,100}
	textkern = {7,9,7,9,7,7,7,9,6,7,9,9,9,9,6,8,6,7,6}
	ta = 0
	gamestate = "title"
	statedelay = 10
end
function drawplayer(xpos,ypos,xscale,yscale,frx,fry)
	color(8)
	for i=0,7,2 do
		line(frx[i+1] * xscale + xpos,fry[i+1] * yscale + ypos - (fry[9]*yscale),frx[i+2] * xscale +xpos,fry[i+2] * yscale + ypos - (fry[9] * yscale),8)
		
	end
end

function drawtext(txt, offset)
	ta += 0.05
	textx = 0
	sinoffset = 0
	for i in all(txt) do
		spr(i,textx + offset,sin(ta + sinoffset) * 4 + 8)
		textx += textkern[i]
		sinoffset += 0.06	
	end
end

function drawblocks()
	for i=1,#blocky do
		rect(blockx[i*2-1],blocky[i],blockx[i*2],128) 
	end
end

function _update()
	-- menus
	if statedelay != 0 then
		statedelay -= 1
	end
	if gamestate == "title" then
		player.state = "title"
		if btn(4) and statedelay == 0 then
			gamestate = "help"
			statedelay = 10
		elseif btn(5) or btn(2) then
			if statedelay == 0 then
				gamestate = "game"
				player.state = "jump"
				player.y +=1
				player.velocity = 8
			end
		end
	end
	if gamestate == "help" then
		player.state = "run"
		if btn(5) and statedelay == 0	then
			gamestate = "title"
			statedelay = 10
		end
	end
	-- game logic
	if gamestate == "game" then
		player.y -= player.velocity
		player.velocity -= 01
	end
	-- player animations
		if player.state == "run" then
		a += 1
		if a == 4 then
			if player.sprlst == f1y then
				player.sprlst = f2y
			else
				player.sprlst = f1y
			end
			a = 0
		end
	end
	if player.state == "jump" then
		if player.sprlst == f1y or player.sprlst == f2y or player.sprlst == f0y then
			player.sprlst = f3y
		elseif player.sprlst == f3y then
			player.sprlst = f4y
		end
		if player.velocity <= 3 and player.velocity >= -3 then
			player.sprlst = f0y
		end
	end
	if player.state == "title" then
		player.sprlst = f0y
	end
		
	if player.state == "land" then
		player.sprlst = f5y
		player.state = "run"
	end
end

function _draw()
	-- draw scene
	cls(1)
	if gamestate == "title" then
		drawtext({6,7,8,6,7,8,6,7,8},32)
		color(8)
		print("a game by dps2004",32,24)
		print("press [x] or [up] to play",15,48)
		print("press [z] for instructions",13,56)	
		drawplayer(player.x,player.y,1,1,fx,player.sprlst)
		drawblocks()	
	end
	if gamestate == "help" then
		drawtext({16,5,15,17},52)
		rect(0,0,127,127)
		print("automatically run",4,30)
		drawplayer(80,34,1,1,fx,player.sprlst)
		print("press [x] to jump",4,46)
		drawplayer(80,50,1,1,fx,f3y)
		print("press [z] to ground-pound",4,62)
		drawplayer(110,64,1,1,fx,f6y)
		print("press [x] to return",26,100)
	end
	if gamestate == "game" then
		drawplayer(player.x,player.y,1,1,fx,player.sprlst)
		drawblocks()	
	end
end
__gfx__
00000000888888800008800008888800888888888888880088880000880088008800008888880000888888000888880088000088088888808800008888000000
00000000888888800088880088888800888888888888880088888000880088008880008888888000888888008888880088800888888888888800008888000000
00000000880000000888888088000000000880008800000088088000880088008888008888088000008800008880000088888888880000888800008888000000
00000000888880008880088888888000000880008888800088888000880088008888808888888000008800008800888088888888880000888800008888000000
00000000888880008800008808888800000880008888800088888800880088008808888888888000008800008800888888088088880000880880088088000000
00000000880000008888888800008800000880008800000088008800880088008800888888088000008800008800008888088088880000880888888088000000
00000000880000008888888888888800000880008888880088008800888888008800088888888000888888008888888888088088888888880088880088888000
00000000880000008800008888888000000880008888880088008800088880008800008888880000888888000888888088088088088888800008800088888000
88000880888800008800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88000880888880008800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88000880880880008800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888880888880008800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88888880888880008800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88000880880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88000880880000008800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
88000880880000008800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111888811188118818811118818888111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111888881188118818881118818888811881188111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111881881188118818888118818818811881188188111188111111111111111111111111111111111111111111111111111
11111111111111111111111111111111888881188118818888818818888811881188188811188111111111111111111111111111111111111111111111111111
11111111111111111111111111111111888888188118818818888818888881881188188881188188881111111111111111111111111111111111111111111111
11111111111111111111111111111111881188188118818811888818811881881188188888188188888118811881111111111111111111111111111111111111
11111111111111111111111111111111881188188888818811188818811881881188188188888188188118811881881111881111111111111111111111111111
11111111111111111111111111111111881188118888118811118818811881888888188118888188888118811881888111881111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111188881188111888188888818811881888811881111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111188111188188118818811881888881881111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111188118818811881881888881111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111188118818888881881188881111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111888811881118881111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111881111881111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111888111111881888188818881111188818181111188118881188188818881888181811111111111111111111111111111
11111111111111111111111111111111818111118111818188818111111181818181111181818181811111818181818181811111111111111111111111111111
11111111111111111111111111111111888111118111888181818811111188118881111181818881888188818181818188811111111111111111111111111111
11111111111111111111111111111111818111118181818181818111111181811181111181818111118181118181818111811111111111111111111111111111
11111111111111111111111111111111818111118881818181818881111188818881111188818111881188818881888111811111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111188818881888118811881111188118181188111111881888111118811818188811881111188811881111188818111888181811111111111111
11111111111111181818181811181118111111181118181118111118181818111118111818181811181111118118181111181818111818181811111111111111
11111111111111188818811881188818881111181111811118111118181881111118111818188811181111118118181111188818111888188811111111111111
11111111111111181118181811111811181111181118181118111118181818111118111818181111181111118118181111181118111818111811111111111111
11111111111111181118181888188118811111188118181188111118811818111118811188181111881111118118811111181118881818188811111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111118881888188811881188111118811888118811111888118818881111188818811188188818881818118818881888118818811188111111111111
11111111111118181818181118111811111118111118111811111811181818181111118118181811118118181818181111811181181818181811111111111111
11111111111118881881188118881888111118111181111811111881181818811111118118181888118118811818181111811181181818181888111111111111
11111111111118111818181111181118111118111811111811111811181818181111118118181118118118181818181111811181181818181118111111111111
11111111111118111818188818811881111118811888118811111811188118181111188818181881118118181188118811811888188118181881111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111188888111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111181181111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111181181111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111188881111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111181181111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111181181111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
88888888888888888888888888888888888888888888888888811111111111111111111111111111111111111111111111111111111111111111111111111111
81111111111111111111111111111111111111111111111111811111111111111111111111111111111111111111111111111111111111111111111111111111
81111111111111111111111111111111111111111111111111811111111111111111111111111111111111111111111111111111111111111111111111111111
81111111111111111111111111111111111111111111111111811111111111111111111111111111111111111111111111111111111111111111111111111111
81111111111111111111111111111111111111111111111111811111111111111111111111111111111111111111111111111111111111111111111111111111
81111111111111111111111111111111111111111111111111811111111111111111111111111111111111111111111111118888888888888888888888888888
81111111111111111111111111111111111111111111111111811111111111111111111111111111111111111111111111118111111111111111111111111111
81111111111111111111111111111111111111111111111111811111111111111111111111111111111111111111111111118111111111111111111111111111
81111111111111111111111111111111111111111111111111811111111111111111111111111111111111111111111111118111111111111111111111111111
81111111111111111111111111111111111111111111111111811111111111111111111111111111111111111111111111118111111111111111111111111111
81111111111111111111111111111111111111111111111111811111111111111111111111111111111111111111111111118111111111111111111111111111
81111111111111111111111111111111111111111111111111811111111111111111111111111111111111111111111111118111111111111111111111111111
81111111111111111111111111111111111111111111111111811111111111111111111111111111111111111111111111118111111111111111111111111111
81111111111111111111111111111111111111111111111111811111111111111111111111111111111111111111111111118111111111111111111111111111
81111111111111111111111111111111111111111111111111811111111111111111111111111111111111111111111111118111111111111111111111111111
81111111111111111111111111111111111111111111111111811111111111111111111111111111111111111111111111118111111111111111111111111111
81111111111111111111111111111111111111111111111111811111111111111111111111111111111111111111111111118111111111111111111111111111
81111111111111111111111111111111111111111111111111811111111111111111111111111111111111111111111111118111111111111111111111111111
81111111111111111111111111111111111111111111111111811111111111111111111111111111111111111111111111118111111111111111111111111111
81111111111111111111111111111111111111111111111111811111111111111111111111111111111111111111111111118111111111111111111111111111
81111111111111111111111111111111111111111111111111811111111188888888888888888888888888888881111111118111111111111111111111111111
81111111111111111111111111111111111111111111111111811111111181111111111111111111111111111181111111118111111111111111111111111111
81111111111111111111111111111111111111111111111111811111111181111111111111111111111111111181111111118111111111111111111111111111
81111111111111111111111111111111111111111111111111811111111181111111111111111111111111111181111111118111111111111111111111111111
81111111111111111111111111111111111111111111111111811111111181111111111111111111111111111181111111118111111111111111111111111111
81111111111111111111111111111111111111111111111111811111111181111111111111111111111111111181111111118111111111111111111111111111
81111111111111111111111111111111111111111111111111811111111181111111111111111111111111111181111111118111111111111111111111111111
81111111111111111111111111111111111111111111111111811111111181111111111111111111111111111181111111118111111111111111111111111111
81111111111111111111111111111111111111111111111111811111111181111111111111111111111111111181111111118111111111111111111111111111
81111111111111111111111111111111111111111111111111811111111181111111111111111111111111111181111111118111111111111111111111111111
81111111111111111111111111111111111111111111111111811111111181111111111111111111111111111181111111118111111111111111111111111111
81111111111111111111111111111111111111111111111111811111111181111111111111111111111111111181111111118111111111111111111111111111
81111111111111111111111111111111111111111111111111811111111181111111111111111111111111111181111111118111111111111111111111111111

